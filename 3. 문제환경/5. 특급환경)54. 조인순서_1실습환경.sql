ALTER SESSION SET WORKAREA_SIZE_POLICY = MANUAL;
ALTER SESSION SET SORT_AREA_SIZE = 2000000000;

DROP TABLE YOON.T_CUST54;
CREATE TABLE YOON.T_CUST54
  (  CUST_NO       VARCHAR2(6)
   , CUST_NM      VARCHAR2(50)
   , CUST_TYPE    VARCHAR2(4)
   , C11          VARCHAR2(50)
   , C12          VARCHAR2(50)
   , C13          VARCHAR2(50)
   , CONSTRAINT PK_T_CUST54 PRIMARY KEY (CUST_NO)
   );
   
CREATE PUBLIC SYNONYM T_CUST54 FOR YOON.T_CUST54;

INSERT /*+ APPEND */ INTO T_CUST54
SELECT LPAD(TO_CHAR(ROWNUM), 6, '0')  CUST_NO
     , LPAD(TO_CHAR(ROWNUM), 50, '0') CUST_NM
     , 'C'|| LPAD(TO_CHAR(MOD(ROWNUM, 200)), 3, '0')        CUST_TYPE
     , '12345678901234567890123456789012345678901234567890' C11
     , '12345678901234567890123456789012345678901234567890' C12
     , '12345678901234567890123456789012345678901234567890' C13
FROM DUAL
CONNECT BY LEVEL <= 100000
ORDER BY DBMS_RANDOM.RANDOM()
;

COMMIT;

DROP INDEX YOON.IX_T_CUST54_01;
CREATE INDEX YOON.IX_T_CUST54_01 ON YOON.T_CUST54(CUST_TYPE);


DROP TABLE YOON.T_HOBBY54;
CREATE TABLE YOON.T_HOBBY54
  (  CUST_NO        VARCHAR2(6)
   , HOBBY_TYPE     VARCHAR2(1)
   , C11            VARCHAR2(50)
   , C12            VARCHAR2(50)
   , C13            VARCHAR2(50)
   , CONSTRAINT PK_HOBBY54 PRIMARY KEY (CUST_NO, HOBBY_TYPE)
   ) NOLOGGING;
   
CREATE PUBLIC SYNONYM T_HOBBY54 FOR YOON.T_HOBBY54;

INSERT /*+ APPEND */ INTO T_HOBBY54
SELECT   CUST_NO, B.R_ID HOBBY_TYPE
       , '12345678901234567890123456789012345678901234567890' C11
       , '12345678901234567890123456789012345678901234567890' C12
       , '12345678901234567890123456789012345678901234567890' C13
FROM T_CUST54 A, (SELECT ROWNUM R_ID FROM DUAL CONNECT BY LEVEL <= 3) B
ORDER BY DBMS_RANDOM.RANDOM();

COMMIT;

DROP TABLE YOON.T_ORDER54;
CREATE TABLE YOON.T_ORDER54
   ( ORDER_NO     VARCHAR2(7)
   , CUST_NO      VARCHAR2(6)
   , ORDER_DT     VARCHAR2(8)
   , ORDER_TYPE   VARCHAR2(3)
   , C11          VARCHAR2(50)
   , C12          VARCHAR2(50)
   , C13          VARCHAR2(50)
   , CONSTRAINT PK_T_ORDER54 PRIMARY KEY(ORDER_NO)
   ) NOLOGGING;
   
CREATE PUBLIC SYNONYM T_ORDER54 FOR YOON.T_ORDER54;

INSERT /*+ APPEND */ INTO T_ORDER54
SELECT LPAD(TO_CHAR(ROWNUM), 7, '0') ORDER_NO
     , CUST_NO
     , CASE WHEN MOD(ROWNUM, 2000) = 0 THEN NULL ELSE TO_CHAR(SYSDATE-ROUND(ROWNUM / 10000), 'YYYYMMDD') END ORDER_DT
     , LPAD(TO_CHAR(B.R_ID), 3, '0') ORDER_TYPE
     , '12345678901234567890123456789012345678901234567890' C11
     , '12345678901234567890123456789012345678901234567890' C12
     , '12345678901234567890123456789012345678901234567890' C13
FROM T_CUST54, (SELECT ROWNUM R_ID FROM DUAL CONNECT BY LEVEL <= 30) B
ORDER BY DBMS_RANDOM.RANDOM();

COMMIT;

DROP INDEX YOON.IX_T_ORDER54_01 ;
CREATE INDEX YOON.IX_T_ORDER54_01 ON YOON.T_ORDER54(CUST_NO);

EXECUTE DBMS_STATS.GATHER_TABLE_STATS('YOON', 'T_CUST54');
EXECUTE DBMS_STATS.GATHER_TABLE_STATS('YOON', 'T_HOBBY54');
EXECUTE DBMS_STATS.GATHER_TABLE_STATS('YOON', 'T_ORDER54');

ALTER SESSION SET WORKAREA_SIZE_POLICY = AUTO;